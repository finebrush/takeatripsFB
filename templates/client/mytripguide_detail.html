{% extends 'client/mytripguide_detail_head.html' %}

{% load i18n static %}
{% get_current_language as LANGUAGE_CODE %}

{% load socialaccount %} 
{% providers_media_js %}

{% load social_share %}


{% block meta %}    <!-- 페이지별 메타 데이터 공간 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta property="og:url"         content="http://www.takeatrips.com{% url 'clientapp:mytripguide_detail' city_id tourplan_id itdetail.id 'mytripguide' %}" />
<meta property="og:type"        content="article" />

{% if LANGUAGE_CODE == 'ko' %}
<meta property="og:title"       content="{{ itdetail.companyko }}" />
{% elif LANGUAGE_CODE == 'en' %}
<meta property="og:title"       content="{{ itdetail.companyeng }}" />
{% elif LANGUAGE_CODE == 'vi' %}
<meta property="og:title"       content="{{ itdetail.companyven }}" />
{% endif %}

{% if LANGUAGE_CODE == 'ko' %}
<meta property="og:description" content="{{ itdetail.introko|linebreaks|striptags }}" />
{% elif LANGUAGE_CODE == 'en' %}
<meta property="og:description" content="{{ itdetail.introeng|linebreaks|striptags }}" />
{% elif LANGUAGE_CODE == 'vi' %}
<meta property="og:description" content="{{ itdetail.introeng|linebreaks|striptags }}" />
{% endif %}

<meta property="og:image"       content="http://www.takeatrips.com/media/{{ itdetail.picture1 }}" />
<meta property="og:image:width" content="600" />
<meta property="og:image:height" content="315" />

<!-- <meta name="twitter:card" content="summary">
<meta name="twitter:title" content="{{ itdetail.companyko}}" />
<meta name="twitter:description" content="{{ itdetail.introko }}" />
<meta name="twitter:image" content="http://www.takeatrips.com/media/{{ itdetail.picture1 }}" /> -->

{% endblock meta %}

{% block css %}        <!-- 페이지별 css -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<link rel=stylesheet href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel=stylesheet href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.css">
<link rel=stylesheet href="{% static 'css/youtubesearch.css' %}">
<link rel=stylesheet href="{% static 'css/imggallery2.css' %}">
<link rel=stylesheet href="{% static 'css/main.css' %}">
<link rel=stylesheet href="{% static 'css/mainsubstyle.css' %}">
<link rel=stylesheet href="{% static 'css/animenu.css' %}">
<link rel=stylesheet href="{% static 'css/mytripguide_detail.css' %}">
{% endblock css %}

{% block scripts %}    <!-- 페이지별 스크립트 공간 -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<script src="{% static 'js/bootstrap-waterfall.js' %}"></script>

<script src="{% static 'js/youtubesearch.js' %}"></script>
<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
{% endblock scripts %}

{% block content %}

        <!-- header -->
        <div class="header-guidedetail">
            <div class="leftitem">
                <!-- back1 또는 back2 둘중에 하나는 hide map 버튼이 상단에 나왔을때..-->
                {% if fromwhere == 'tourplan' %}
                <div id="back1" style="align-self: center;">
                    <a href="{% url 'clientapp:mytrip_detail' city_id tourplan_id %}"> 
                        <img src="{% static 'img/trip_detail_back.png' %}" style="width: 20px; height: 32px;"/>
                    </a>
                </div>
                {% elif fromwhere == 'trips' %}
                <div id="back1" style="align-self: center;">
                    <a href="{% url 'clientapp:trips' city_id %}"> 
                        <img src="{% static 'img/trip_detail_back.png' %}" style="width: 20px; height: 32px;"/>
                    </a>
                </div>
                {% elif fromwhere == 'mycurator' %}
                <div id="back1" style="align-self: center;">
                    <a href="{% url 'clientapp:mycurator' city_id tourplan_id %}"> 
                        <img src="{% static 'img/trip_detail_back.png' %}" style="width: 20px; height: 32px;"/>
                    </a>
                </div>
                {% elif fromwhere == 'mytripguide' %}
                <div id="back1" style="align-self: center;">
                    <!-- <a href="{% url 'clientapp:mytripguide' city_id tourplan_id 1 %}">  pinnum = 1 는 eat -->
                    <a href="#" onclick="history.back(); return false;">
                        <img src="{% static 'img/trip_detail_back.png' %}" style="width: 20px; height: 32px;"/>
                    </a>
                </div>
                {% elif fromwhere == 'mytripguidelike' %}
                <div id="back1" style="align-self: center;">
                    <!-- <a href="{% url 'clientapp:mytripguide' city_id tourplan_id 1 %}">  pinnum = 1 는 eat -->
                    <a href="#" onclick="history.go(-2); return false;">
                        <img src="{% static 'img/trip_detail_back.png' %}" style="width: 20px; height: 32px;"/>
                    </a>
                </div>
                {% elif fromwhere == 'curator' %}
                <div id="back1" style="align-self: center;">
                    <!-- <a href="{% url 'clientapp:tripscurator' city_id %}">  -->
                    <a href="#" onclick="history.back(); return false;">
                        <img src="{% static 'img/trip_detail_back.png' %}" style="width: 20px; height: 32px;"/>
                    </a>
                </div>
                {% else %}
                <div id="back1" style="align-self: center;">
                    <a href="{% url 'clientapp:mytrip' %}"> 
                        <img src="{% static 'img/trip_detail_back.png' %}" style="width: 20px; height: 32px;"/>
                    </a>
                </div>
                <!-- 유튜브 뒤로가기.. -->
                {% endif %}
                <div id="back2" style="align-self: center;">
                    <a href="{% url 'clientapp:mytripguide_detail' city_id tourplan_id itdetail.id 'mytripguide' %}"> 
                        <img src="{% static 'img/trip_detail_back.png' %}" style="width: 20px; height: 32px;"/>
                    </a>
                </div>
        
                <div style="padding-left: 20px;">
                    <h3 class="font-weight-bold" style="margin-bottom: 0px;">
        
                        {% if LANGUAGE_CODE == 'ko' %}
                        <a href="{% url 'clientapp:mytripguide_detail' city_id tourplan_id itdetail.id 'mytripguide' %}" class="card-link text-dark">{{ itdetail.companyko }}</a>
                        {% elif LANGUAGE_CODE == 'en' %}
                        <a href="{% url 'clientapp:mytripguide_detail' city_id tourplan_id itdetail.id 'mytripguide' %}" class="card-link text-dark">{{ itdetail.companyeng }}</a>
                        {% elif LANGUAGE_CODE == 'vi' %}
                        <a href="{% url 'clientapp:mytripguide_detail' city_id tourplan_id itdetail.id 'mytripguide' %}" class="card-link text-dark">{{ itdetail.companyven }}</a>
                        {% endif %}
                        
                        <small class="font-italic" style="margin-top: 14px;margin-bottom: 0px;margin-left: 5px;color: #c1223f;font-size: 16px;">{{ itdetail.get_typeit_display }}</small> 
                    </h3>
                    <div style="margin-bottom: 0px;font-size: 14px;"> {{ itdetail.get_part_display }} 
                        
                        {% if LANGUAGE_CODE == 'ko' %}
                        <font style="color: black;"> &middot; {{ itdetail.categorymedium.name }}</font>
                        {% elif LANGUAGE_CODE == 'en' %}
                        <font style="color: black;"> &middot; {{ itdetail.categorymedium.nameeng }}</font>
                        {% elif LANGUAGE_CODE == 'vi' %}
                        <font style="color: black;"> &middot; {{ itdetail.categorymedium.nameven }}</font>
                        {% endif %}
        
                    </div>
                </div>
            </div>

            <div class="rightitem">
                <div style="display: flex;">
                    <!-- <a href="#map" class="card-link p-2 text-dark" id="btnmap" alt="위치보기">
                        <i class="fa fa-map-o" style="font-size:24px;"></i>
                    </a> -->
                    <div>
                        <a href="#youtube" id="btnyt" style="text-decoration: none;">
                            <img src="{% static 'img/trip_detail_youtube.png' %}" style="width: 44px; height: 44px;"/>
                        </a>
                    </div>

                    <!-- 인스타 링크가 DB 에 있는 경우/없는 경우 -->
                    <div>
                        {% if itdetail.linkinsta %}
                        <a href="{{ itdetail.linkinsta }}" target="_blank" id="btninsta" style="text-decoration: none;">
                            <img src="{% static 'img/trip_detail_instagram.png' %}" style="width: 44px; height: 44px;margin:0 10px;"/>
                        </a>
                        {% else %}
                        <a href="https://www.instagram.com/explore/tags/{{ itdetail.companyko }}/" target="_blank" id="btninsta" style="text-decoration: none;">
                            <img src="{% static 'img/trip_detail_instagram.png' %}" style="width: 44px; height: 44px;margin:0 10px;"/>
                        </a>
                        {% endif %}
                    </div>

                    <!-- 좋아요 로그인/아웃 경우 -->
                    <div>
                        {% if user.is_authenticated %}
                        <a href="{% url 'clientapp:mytripguide_like' city_id tourplan_id itdetail.id 'mytripguidelike' %}" id="btnlike" style="text-decoration: none;">
                            {% if user in itdetail.like_infotravel.all %}
                            <img src="{% static 'img/icon_mypick57on.png' %}" style="width: 44px; height: 44px;"/>
                            {% else %}
                            <img src="{% static 'img/icon_mypick57off.png' %}" style="width: 44px; height: 44px;"/>
                            {% endif %}
                        </a> 
                        {% else %}
                        <a href="#layer1" class="btn-examplelogin">
                            <img src="{% static 'img/icon_mypick57off.png' %}" style="width: 44px; height: 44px;"/>
                        </a>
                        {% endif %}
                    </div>

                    <div style="position: relative;width: 44px;margin-left: 10px;">
                        <nav class="menu">
                            <input type="checkbox" href="#" class="menu-open" name="menu-open" id="menu-open" />
                            <label class="menu-open-button" for="menu-open">
                                <i class="fa fa-share-alt fbshare"></i>
                        </label>
                            {% post_to_facebook object_or_url "Post to Facebook!" %}
                            <!-- <a href="#" class="menu-item red"> <i class="fa fa-google-plus" style="margin-top: 8px;"></i> </a> -->
                            
                            {% if LANGUAGE_CODE == 'ko' %}
                            {% post_to_twitter "{{ itdetail.companyko }} : {{ itdetail.introko|linebreaks|striptags }} http://www.takeatrips.com/media/{{ itdetail.picture1 }}" object_or_url "" %}
                            {% elif LANGUAGE_CODE == 'en' %}
                            {% post_to_twitter "{{ itdetail.companyeng }} : {{ itdetail.introeng|linebreaks|striptags }} http://www.takeatrips.com/media/{{ itdetail.picture1 }}" object_or_url "" %}
                            {% elif LANGUAGE_CODE == 'vi' %}
                            {% post_to_twitter "{{ itdetail.companyven }} : {{ itdetail.introven|linebreaks|striptags }} http://www.takeatrips.com/media/{{ itdetail.picture1 }}" object_or_url "" %}
                            {% endif %}
                            
                            {% post_to_telegram object_or_url "" %}
                            <a id="kakao-link-btn" class="menu-item red" href="javascript:sendLink()">
                                <img class="fbkakao" src="{% static 'img/icon_kakaotalk.png' %}"/>
                            </a>

                            {% if LANGUAGE_CODE == 'ko' %}
                            {% send_email "New tripguide : {{ itdetail.companyko }}" "{{ itdetail.companyko }} : {{ itdetail.introko|linebreaks|striptags }} Check it out!" object_or_url "Share via email" %}
                            {% elif LANGUAGE_CODE == 'en' %}
                            {% send_email "New tripguide : {{ itdetail.companyeng }}" "{{ itdetail.companyeng }} : {{ itdetail.introeng|linebreaks|striptags }} Check it out!" object_or_url "Share via email" %}
                            {% elif LANGUAGE_CODE == 'vi' %}
                            {% send_email "New tripguide : {{ itdetail.companyven }}" "{{ itdetail.companyven }} : {{ itdetail.introeven|linebreaks|striptags }} Check it out!" object_or_url "Share via email" %}
                            {% endif %}
                            
                            <!-- <a href="#" class="menu-item lightblue"> <i class="fa fa-diamond" style="margin-top: 8px;"></i> </a> -->
                        </nav>
                    </div>

                </div>
            </div>
        </div>

        <div class="linepart"></div>
      

        <div id="detailbase">
            <!-- 대표 이미지 .. -->
            <div class="imggallery">
                <div class="imgcontainer">
                    <div class="img3grid">
                        {% if itdetail.picture1 %}
                            <figure class="img-container marginzero">
                                <a href="#layer2" class="btn-example" id="p1">
                                    <img class="pict" src="{{ itdetail.picture1.url }}" id="picture1" />
                                </a>
                            </figure>
                        {% endif %}
                        {% if itdetail.picture2 %}
                            <figure class="img-container marginzero">
                                <a href="#layer2" class="btn-example" id="p2">
                                    <img class="pict" src="{{ itdetail.picture2.url }}" id="picture2" />
                                </a>
                            </figure>
                        {% endif %}
                        {% if itdetail.picture3 %}
                            <figure class="img-container marginzero">
                                <a href="#layer2" class="btn-example" id="p3">
                                    <img class="pict" src="{{ itdetail.picture3.url }}" id="picture3" />
                                </a>
                            </figure>
                        {% endif %}
                        {% if itdetail.picture4 %}
                            <figure class="img-container marginzero">
                                <a href="#layer2" class="btn-example" id="p4">
                                    <img class="pict" src="{{ itdetail.picture4.url }}" id="picture4" />
                                </a>
                            </figure>
                        {% endif %}
                        {% if itdetail.picture5 %}
                            <figure class="img-container marginzero">
                                <a href="#layer2" class="btn-example" id="p5">
                                    <img class="pict" src="{{ itdetail.picture5.url }}" id="picture5" />
                                </a>
                            </figure>
                        {% endif %}
                        {% if itdetail.picture6 %}
                            <figure class="img-container marginzero">
                                <a href="#layer2" class="btn-example" id="p6">
                                    <img class="pict" src="{{ itdetail.picture6.url }}" id="picture6" />
                                </a>
                            </figure>
                        {% endif %}
                    </div>
                    <div class="img2grid">
                        {% if itdetail.picture7 %}
                            <figure class="img-container marginzero">
                                <a href="#layer2" class="btn-example" id="p7">
                                    <img class="pict" src="{{ itdetail.picture7.url }}" id="picture7" />
                                </a>
                            </figure>
                        {% endif %}
                        {% if itdetail.picture8 %}
                            <figure class="img-container marginzero">
                                <a href="#layer2" class="btn-example" id="p8">
                                    <img class="pict" src="{{ itdetail.picture8.url }}" id="picture8" />
                                </a>
                            </figure>
                        {% endif %}
                        {% if itdetail.picture9 %}
                            <figure class="img-container marginzero">
                                <a href="#layer2" class="btn-example" id="p9">
                                    <img class="pict" src="{{ itdetail.picture9.url }}" id="picture9" />
                                </a>
                            </figure>
                        {% endif %}
                        {% if itdetail.picture10 %}
                            <figure class="img-container marginzero">
                                <a href="#layer2" class="btn-example" id="p10">
                                    <img class="pict" src="{{ itdetail.picture10.url }}" id="picture10" />
                                </a>
                            </figure>
                        {% endif %}
                    </div>
                </div>
            </div>
    
    
            <!-- 소개정보 / 일반정보.. -->
            <div class="infointro">
                <div class="infointro-in">
                    <div class="card" style="max-height: 450px; border:0px;">
                        <div class="card-body p-0">
                            <h5 class="card-title" style="font-weight:600; color:black;">{% trans "소개" %}</h5>
                            <hr style="border: solid 1px #000000;">
        
                            {% if LANGUAGE_CODE == 'ko' %}
                            <p class="card-text" style="white-space:pre-line;"> {{ itdetail.introko }}</p>
                            {% elif LANGUAGE_CODE == 'en' %}
                            <p class="card-text" style="white-space:pre-line;"> {{ itdetail.introeng }}</p>
                            {% elif LANGUAGE_CODE == 'vi' %}
                            <p class="card-text" style="white-space:pre-line;"> {{ itdetail.introven }}</p>
                            {% endif %}
        
                        </div>
                    </div>
                    
                    <div class="card" style="max-height: 450px; border:0px;">
                        <div class="card-body p-0">
                            <h5 class="card-title" style="font-weight:600; color:black;">{% trans "일반정보" %}</h5>
                            <hr style="border: solid 1px #000000;">
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon01.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "주소" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.addressko }}</p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.addresseng }}</p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.addressven }}</p>
                                {% endif %}
        
                            </div>
                            <hr style="border: solid 0.5px #969696b3;">
                            {% if itdetail.part == 'Eat' %}
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon02.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "대표메뉴" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.eatpart.menuko }} </p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.eatpart.menueng }} </p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.eatpart.menuven }} </p>
                                {% endif %}
        
                            </div>
                                <hr style="border: solid 0.5px #969696b3;">
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon03.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "운영시간" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.eatpart.biztimeko }} </p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.eatpart.biztimeeng }} </p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.eatpart.biztimeven }} </p>
                                {% endif %}
        
                            </div>
                            {% elif itdetail.part == 'Drink' %}
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon02.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "대표메뉴" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.drinkpart.menuko }} </p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.drinkpart.menueng }} </p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.drinkpart.menuven }} </p>
                                {% endif %}
        
                            </div>
                                <hr style="border: solid 0.5px #969696b3;">
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon03.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "운영시간" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.drinkpart.biztimeko }} </p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.drinkpart.biztimeeng }} </p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.drinkpart.biztimeven }} </p>
                                {% endif %}
        
                            </div>
                            {% elif itdetail.part == 'Fun' %}
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon08.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "프로그램" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.funpart.programko }} </p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.funpart.programeng }} </p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.funpart.programven }} </p>
                                {% endif %}
        
                            </div>
                                <hr style="border: solid 0.5px #969696b3;">
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon03.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "운영시간" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.funpart.biztimeko }} </p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.funpart.biztimeeng }} </p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.funpart.biztimeven }} </p>
                                {% endif %}
        
                            </div>
                            {% elif itdetail.part == 'See' %}
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon03.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "운영시간" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.seepart.operationtimeko }} </p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.seepart.operationtimeeng }} </p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.seepart.operationtimeven }} </p>
                                {% endif %}
        
                            </div>
                            {% elif itdetail.part == 'Sleep' %}
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon05.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "포함사항" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.sleeppart.inclusionko }} </p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.sleeppart.inclusioneng }} </p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.sleeppart.inclusionven }} </p>
                                {% endif %}
        
                            </div>
                                <hr style="border: solid 0.5px #969696b3;">
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon06.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "객실타입" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.sleeppart.roomtypeko }} </p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.sleeppart.roomtypeeng }} </p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.sleeppart.roomtypeven }} </p>
                                {% endif %}
        
                            </div>  
                            {% elif itdetail.part == 'Buy' %}
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon07.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "판매상품" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.buypart.saleitemsko }} </p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.buypart.saleitemseng }} </p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.buypart.saleitemsven }} </p>
                                {% endif %}
        
                            </div>
                                <hr style="border: solid 0.5px #969696b3;">
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon03.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "운영시간" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.buypart.biztimeko }} </p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.buypart.biztimeeng }} </p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.buypart.biztimeven }} </p>
                                {% endif %}
        
                            </div>
                            {% endif %}
                            <hr style="border: solid 0.5px #969696b3;">
                            <div class="introinfo">
                                <div  style="display: flex;">
                                    <img src="{% static 'img/tg_icon04.png' %}" style="width: 25px;height: 25px;margin-right: 10px;"/>
                                    <span style="color: black; width: 100px;"> {% trans "교통정보" %} </span>
                                </div>
                                {% if LANGUAGE_CODE == 'ko' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.trafficko }}</p>
                                {% elif LANGUAGE_CODE == 'en' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.trafficeng }}</p>
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <p class="card-text" style="width: 540px;"> {{ itdetail.trafficven }}</p>
                                {% endif %}
        
                            </div>
                            <hr style="border: solid 0.5px #969696b3;">
                        </div>
                    </div>
                </div>
            </div>
    
    
            
            <!-- 팝업창 띄우기 -->
            <!-- <a href="#layer2" class="btn-example">딤처리 팝업레이어 1</a> -->
            <div class="dim-layer">
                <div class="dimBg"></div>
                <div id="layer2" class="pop-layer" style="width: fit-content;">
                    <div class="pop-container">
                        <div class="pop-conts">
                            <!--content //-->
                            <a href="#" class="layerClose">
                                <img src="{{ itdetail.picture1.url }}" style="height: 85vh; width: auto;" id="picture" />
                            </a>
                            <!--// content-->
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- 로그인 팝업창 띄우기 -->
            <!-- <a href="#layer2" class="btn-example">딤처리 팝업레이어 1</a> -->
            <div class="dim-layer1">
                <div class="dimBg"></div>
                <div id="layer1" class="pop-layer" style="width: 400px;">
                    
                    <div class="login-box">
                        {% if error %}
                            {{error}}
                        {%endif%}
                        <div class="lb-header">
                            <a href="#" class="active" id="login-box-link">Login</a>
                            <a href="#" id="signup-box-link">Sign Up</a>
                        </div>
                        
                        <div class="social-login">
                            <a href="{% provider_login_url 'facebook' %}">
                                <i class="fa fa-facebook fa-lg"></i>
                                Login in with facebook
                            </a>
                            <a href="{% provider_login_url 'google' %}">
                                <i class="fa fa-google-plus fa-lg"></i>
                                log in with Google
                            </a>
                        </div>
                        <form class="email-login" method="POST" action="{% url 'account:login' %}">
                            {% csrf_token %}
                            <div class="u-form-group">
                                <!-- <input type="email" placeholder="Email"/> -->
                                <input name="username" type="text" placeholder="Name">
                            </div>
                            <div class="u-form-group">
                                <input name="password" type="password" placeholder="Password"/>
                            </div>
                            <div class="u-form-group">
                                <button>Log in</button>
                            </div>
                            <div class="u-form-group">
                                <a href="#" class="forgot-password">Forgot password?</a>
                            </div>
                        </form>

                        <form class="email-signup" method="POST" action="{% url 'account:signup' %}">
                            {% csrf_token %}
                            <div class="u-form-group">
                                <!-- <input type="email" placeholder="Email"/> -->
                                <input name="username" type="text" placeholder="Name">
                            </div>
                            <div class="u-form-group">
                                <input name="password1" type="password" placeholder="Password"/>
                            </div>
                            <div class="u-form-group">
                                <input name="password2" type="password" placeholder="Confirm Password"/>
                            </div>
                            <div class="u-form-group">
                                <button>Sign Up</button>
                            </div>
                        </form>
                        
                    </div>

                    
                </div>
            </div>
            
            <!-- googlemap.. -->
            <!-- <div class="infointro">
                <div class="infointro-in map">
                    <div id="map"></div>
                    <div id="content" style="display: contents; text-align: center; overflow:hidden;">
                        
                        {% if LANGUAGE_CODE == 'ko' %}
                        <h5 style="margin: 0px 20px;">{{ itdetail.companyko }}</h5>
                        {% elif LANGUAGE_CODE == 'en' %}
                        <h5 style="margin: 0px 20px;">{{ itdetail.companyeng }}</h5>
                        {% elif LANGUAGE_CODE == 'vi' %}
                        <h5 style="margin: 0px 20px;">{{ itdetail.companyven }}</h5>
                        {% endif %}
            
                        <p style="margin: 0px!important;"> {{ itdetail.get_part_display }}</p>
                    </div>
                </div>
            </div> -->
            
            <!-- django-waterfall 이미지 들어가는 부분.. 
                imggallery2.css 때문에 다른 페이지의 waterfall 하고 다르게 <lu / <li 태그 안쓰고 style 다름-->
            <div class="infointro">
                <div class="infointro-in water">
                    <h4 class="card-title" style="color: black;">{% trans "유사한 여행 정보 보기" %}</h4>
            
                    <div class="card" style="padding-top: 0px!important; border:0px;">
                        <div class=container style="margin:0px; padding:0px; max-width:1920px;">
                            <div class=waterfall> 
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- DB 에서 tripguide(InfoTravel) 가져오기... -->
            <script id=waterfall-template type=text/template>
                {% for itdetail in itdetails %}
                <div class="list-group">
                    <div class="list-group-up">
                        <a href="{% url 'clientapp:mytripguide_detail' city_id tourplan_id itdetail.id 'mytripguide' %}"> 
                            <img src="{{ itdetail.picture1.url }}" style="border-top-right-radius: 12px;border-top-left-radius: 12px;"> </a>
                    </div>
                    <!-- <li class="list-group-item">
                        <span class="fa fa-heart" style="font-size:16px; float:right;">
                            <span>{{ itdetail.like_count }}</span>
                        </span>
                    </li> -->
                    <div class="list-group-it">
                        <div class="media">
                            <!-- <div class="media-left">
                                <a href="javascript:;"> <img class="media-object img-rounded" style="width: 30px; height: 30px;" src="{% static 'images/avatar_30.png' %}" /> </a>
                            </div> -->
                            <div class="media-body">
                                
                                {% if LANGUAGE_CODE == 'ko' %}
                                <h5 class="media-heading">{{ itdetail.companyko }}</h5> 
                                <small style="color:blue;">{{ itdetail.get_part_display }}</small><br>
                                <small>{{ itdetail.introko|truncatewords:7 }}</small> 
                                {% elif LANGUAGE_CODE == 'en' %}
                                <h5 class="media-heading">{{ itdetail.companyeng }}</h5> 
                                <small style="color:blue;">{{ itdetail.part }}</small><br>
                                <small>{{ itdetail.introeng|truncatewords:7 }}</small> 
                                {% elif LANGUAGE_CODE == 'vi' %}
                                <h5 class="media-heading">{{ itdetail.companyven }}</h5> 
                                <small style="color:blue;">{{ itdetail.part }}</small><br>
                                <small>{{ itdetail.introven|truncatewords:7 }}</small> 
                                {% endif %}
                                
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </script>   
    
        </div>  <!-- end detailbase -->   
    
       
    
    
        <!-- youtube search -->
        <div class="infointro">
            <div class="infointro-in map">
                <div id="youtubsearch" style="padding:0 40px;margin-top: 70px;">
                    <nav class="navbar navbar-light bg-faded">
                        <div class="row" style="width: 100%;">
                                <div class="col-sm-2">
                                    <h4 class="logo" style="width: 100%;"><i class="fa fa-youtube yt"></i><span>youtube search</span></h4>
                                </div>
                            <div class="col-sm-10">
                                <form class="form-inline " id="search-form" name="search-form" onSubmit="return search()">
                                    <table width="100%">
                                        <tr>
                                            <td width="100%">
                                                <div class="d3 float-right" style="width:100%;" >	
                                                    <input class="form-control search-field" type="search" id="query" style="width:100%;"  placeholder="Search Youtube">
                                                    <span class="focus-border">
                                                        <i></i>
                                                    </span>
                                                </div>
                                            </td>
                                            <td>
                                                <button class="btn btn-outline-danger my-2 my-sm-0 " type="submit" id="search-btn"  name="search-btn" value="">Search</button>
                                            </td>
                                        </tr>                
                                    </table>  
                                </form>
                            </div>
                        </div>
                        
                    </nav>
                    
                    <div class="content-youtube">
                    <div class="container-fluid" id="results">               
                        
                    </div> <!-- ENd of container fluid -->
            
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-sm-12"><div id="btn-cnt"></div> </div>
                        </div>
                    </div>
                    </div> <!-- End of content -->
                </div> <!-- Ene of youtubesearch -->
            </div>
        </div>

    
        <!-- Footer -->
        <footer class="page-footer font-small" style="background-color:#ffffff; margin-top:0px; ">
            <div style="display: flex; justify-content: center;">
                <div class="footer-menu">의견 보내기</div>
                <div class="footer-menu">개인정보처리방침</div>
                <div class="footer-menu">서비스 약관</div>
            </div>
            <div class="footer-copyrights">© 2019 Copyright : TAKEBO All rights reserved.</div>
        </footer>
        <!-- Footer -->


        <script type="text/javascript">

            // var url = 'http://www.takeatrips.com{% url "clientapp:mytripguide_detail" city_id tourplan_id itdetail.id "mytripguide" %}'; 
            // var title = '{{ itdetail.companyko }}'; 
            // var description = '{{ itdetail.introko|linebreaks|striptags }}'; 
            // var imgUrl = '{{ itdetail.picture1 }}'; 
            
            // if( !$('meta[property="og:url"').attr('content') ) 
            // { 
            //     $('head').append('<meta property="og:url" content="'+url+'"/>'); 
            // } 
            // if( !$('meta[property="og:type"').attr('content') ) 
            // { 
            //     $('head').append('<meta property="og:type" content="website"/>');
            //     $('head').append('<meta property="twitter:card" content="summary"/>');  
            // } 
            // if( !$('meta[property="og:title"').attr('content') ) 
            // { 
            //     $('head').append('<meta property="og:title" content="'+title+'"/>'); 
            //     $('head').append('<meta property="twitter:title" content="'+title+'"/>'); 
            // } 
            // if( !$('meta[property="og:description"').attr('content') ) 
            // { 
            //     $('head').append('<meta property="og:description" content="'+description+'"/>'); 
            //     $('head').append('<meta property="twitter:description" content="'+description+'"/>'); 
            // } 
            // if( !$('meta[property="og:image"').attr('content') ) 
            // { 
            //     $('head').append('<meta property="og:image" content="http://www.takeatrips.com/media/'+imgUrl+'"/>'); 
            //     $('head').append('<meta property="twitter:image" content="http://www.takeatrips.com/media/'+imgUrl+'"/>'); 
            // }

            // // 사용할 앱의 JavaScript 키를 설정해 주세요.
            Kakao.init('22ad0a84386795c39a810264021fb375');
            // // 카카오링크 버튼을 생성합니다. 처음 한번만 호출하면 됩니다.
            Kakao.Link.createDefaultButton({
                container: '#kakao-link-btn',
                objectType: 'feed',
                content: {
                    title: '{{ itdetail.companyko }}',
                    description: '{{ itdetail.introko|linebreaks|striptags }}',
                    imageUrl: 'http://www.takeatrips.com/media/{{ itdetail.picture1 }}',
                    link: {
                        mobileWebUrl: 'http://www.takeatrips.com{% url "clientapp:mytripguide_detail" city_id tourplan_id itdetail.id "mytripguide" %}',
                        webUrl: 'http://www.takeatrips.com{% url "clientapp:mytripguide_detail" city_id tourplan_id itdetail.id "mytripguide" %}'
                    }
                },
                buttons: [
                    {
                        title: '웹으로 보기',
                        link: {
                            mobileWebUrl: 'http://www.takeatrips.com{% url "clientapp:mytripguide_detail" city_id tourplan_id itdetail.id "mytripguide" %}',
                            webUrl: 'http://www.takeatrips.com{% url "clientapp:mytripguide_detail" city_id tourplan_id itdetail.id "mytripguide" %}'
                        }
                    },
                    // {
                    //     title: '앱으로 보기',
                    //     link: {
                    //         mobileWebUrl: 'http://www.takeatrips.com{% url "clientapp:mytripguide_detail" city_id tourplan_id itdetail.id "mytripguide" %}',
                    //         webUrl: 'http://www.takeatrips.com{% url "clientapp:mytripguide_detail" city_id tourplan_id itdetail.id "mytripguide" %}'
                    //     }
                    // }
                ]
            });


            $('.waterfall')
                .data('bootstrap-waterfall-template', $('#waterfall-template').html())
                .on('finishing.mystist.waterfall', function() {
                    setTimeout(function() { // simulate ajax
                        $('.waterfall').data('mystist.waterfall').addPins($($('#another-template').html()))
                    }, 2000);
                })
                .waterfall()
        
            // hide-unhide contents
            $('#back2').hide();
            $('#map').show();
            $('#youtubsearch').hide();
    
            $('#btnyt').click(function(){
                $('#detailbase').hide();
                $('#back1').hide();
                $('#back2').show();
                // $('#map').hide();
                $('#youtubsearch').show();

                //Set form input
                document.getElementById("query").value = "{{ itdetail.companyko }}";
                search();
                
            });
    
            // // Initialize and add the map
            // function initMap() {
            //     // console.log("{{ itdetail.itlocation.x }}");
                
            //     // The location of Uluru
            //     var uluru = {lat: {{ itdetail.itlocation.y }}, lng: {{ itdetail.itlocation.x }}};
            //     // The map, centered at Uluru
            //     var map = new google.maps.Map(
            //         document.getElementById('map'), {zoom: 16, center: uluru});
            //     // The marker, positioned at Uluru
            //     var marker = new google.maps.Marker({position: uluru, map: map});
    
            //     // Info Window
            //     var infoWindow = new google.maps.InfoWindow({
            //             pixelOffset: new google.maps.Size(0,-50),
            //             content: document.getElementById('content')
            //     });
            //     infoWindow.setPosition(uluru);
            //     // infoWindow.setContent("{{ itdetail.companyko }}");
            //     infoWindow.open(map);
            // }

            // 로그인 관련..
            $(".email-signup").hide();
            $("#signup-box-link").click(function(){
                $(".email-login").fadeOut(100);
                $(".email-signup").delay(100).fadeIn(100);
                $("#login-box-link").removeClass("active");
                $("#signup-box-link").addClass("active");
            });
            $("#login-box-link").click(function(){
                $(".email-login").delay(100).fadeIn(100);;
                $(".email-signup").fadeOut(100);
                $("#login-box-link").addClass("active");
                $("#signup-box-link").removeClass("active");
            });

            var box_login = document.getElementById("login-box-link");
            var box_sign = document.getElementById("signup-box-link");

            $("#click_login").click(function(){
                box_sign.classList.remove('active');
                box_login.classList.add('active');

                $(".email-login").delay(100).fadeIn(100);;
                $(".email-signup").fadeOut(100);
                $("#login-box-link").addClass("active");
                $("#signup-box-link").removeClass("active");
            });
            $("#click_sign").click(function(){
                box_login.classList.remove('active');
                box_sign.classList.add('active');

                $(".email-login").fadeOut(100);
                $(".email-signup").delay(100).fadeIn(100);
                $("#login-box-link").removeClass("active");
                $("#signup-box-link").addClass("active");
            });

            // head.html 안에 있는 버튼...
            $("#click_login1").click(function(){
                box_sign.classList.remove('active');
                box_login.classList.add('active');

                $(".email-login").delay(100).fadeIn(100);;
                $(".email-signup").fadeOut(100);
                $("#login-box-link").addClass("active");
                $("#signup-box-link").removeClass("active");
            });
            $("#click_sign1").click(function(){
                box_login.classList.remove('active');
                box_sign.classList.add('active');

                $(".email-login").fadeOut(100);
                $(".email-signup").delay(100).fadeIn(100);
                $("#login-box-link").removeClass("active");
                $("#signup-box-link").addClass("active");
            });

            // AR 팝업창 띄우기..
            $('.btn-examplelogin').click(function(){
                var $href = $(this).attr('href');
                layer_popup($href, 1);
            });
    
            // 팝업창 띄우기..
            $('.btn-example').click(function(){
                var $href = $(this).attr('href');
                layer_popup($href, 0);
    
                // 클릭한 이미지를 새창으로 띄운다..
                var $id = $(this).attr('id');
                // console.log($id);
                switch($id){
                    case 'p1':
                        var $picture = $(document.getElementById('picture1')).attr('src');
                        $(document.getElementById('picture')).attr('src', $picture);
                        break;
                    case 'p2':
                        var $picture = $(document.getElementById('picture2')).attr('src');
                        $(document.getElementById('picture')).attr('src', $picture);
                        break;
                    case 'p3':
                        var $picture = $(document.getElementById('picture3')).attr('src');
                        $(document.getElementById('picture')).attr('src', $picture);
                        break;
                    case 'p4':
                        var $picture = $(document.getElementById('picture4')).attr('src');
                        $(document.getElementById('picture')).attr('src', $picture);
                        break;
                    case 'p5':
                        var $picture = $(document.getElementById('picture5')).attr('src');
                        $(document.getElementById('picture')).attr('src', $picture);
                        break;
                    case 'p6':
                        var $picture = $(document.getElementById('picture6')).attr('src');
                        $(document.getElementById('picture')).attr('src', $picture);
                        break;
                    case 'p7':
                        var $picture = $(document.getElementById('picture7')).attr('src');
                        $(document.getElementById('picture')).attr('src', $picture);
                        break;
                    case 'p8':
                        var $picture = $(document.getElementById('picture8')).attr('src');
                        $(document.getElementById('picture')).attr('src', $picture);
                        break;
                    case 'p9':
                        var $picture = $(document.getElementById('picture9')).attr('src');
                        $(document.getElementById('picture')).attr('src', $picture);
                        break;
                    case 'p10':
                        var $picture = $(document.getElementById('picture10')).attr('src');
                        $(document.getElementById('picture')).attr('src', $picture);
                        break;
    
                }
            });
    
            function layer_popup(el, n){
                var $el = $(el);        //레이어의 id를 $el 변수에 저장
                var isDim = $el.prev().hasClass('dimBg');   //dimmed 레이어를 감지하기 위한 boolean 변수
                
                // isDim ? $('.dim-layer').fadeIn() : $el.fadeIn();
                if(n == 0){
                    isDim ? $('.dim-layer').fadeIn() : $el.fadeIn();
                }
                if(n == 1) {
                    // console.log(isDim);
                    isDim ? $('.dim-layer1').fadeIn() : $el.fadeIn();
                }
    
                var $elWidth = ~~($el.outerWidth()),
                    $elHeight = ~~($el.outerHeight()),
                    docWidth = $(document).width(),
                    docHeight = $(document).height();
    
                // 화면의 중앙에 레이어를 띄운다.
                if ($elHeight < docHeight || $elWidth < docWidth) {
                    $el.css({
                        marginTop: -$elHeight /2 + 35,
                        marginLeft: -$elWidth/2
                    })
                } else {
                    $el.css({top: 0, left: 0});
                }
    
                $el.find('a.layerClose').click(function(){
                    // isDim ? $('.dim-layer').fadeOut() : $el.fadeOut(); // 닫기 버튼을 클릭하면 레이어가 닫힌다.
                    if(n == 0){
                        isDim ? $('.dim-layer').fadeOut() : $el.fadeOut(); // 닫기 버튼을 클릭하면 레이어가 닫힌다.
                    }
                    if(n == 1) {
                        isDim ? $('.dim-layer1').fadeOut() : $el.fadeOut(); // 닫기 버튼을 클릭하면 레이어가 닫힌다.
                    }

                    return false;
                });
    
                $('.dimBg').click(function(){
                    $('.dim-layer').fadeOut();
                    $('.dim-layer1').fadeOut();
                    return false;
                });
            }
    
        </script>
    
        <!-- <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA9P6UvbrGzl1-ooprZXq4HghPXX27Q7Po&callback=initMap">
        </script> -->
        
{% endblock content %}   


